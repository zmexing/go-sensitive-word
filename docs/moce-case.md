# 多分支敏感词对比图
```
敏感词："台海国"、"台海独立"、"台海总统"、"台海帝国"、"台界帝国"、"洲界帝国"、"皇帝国家"、"统战部"
```

## DFA 树示意图

```mermaid
graph TD
    Root((root))

    %% 第一层
    Root --> 台["台"]
    Root --> 洲["洲"]
    Root --> 皇["皇"]
    Root --> 统["统"]

    %% 台开头
    台 --> 海["海"]

    海 --> 国["国"]
    国 -->|isLeaf| 国Leaf((台海国))

    海 --> 独["独"]
    独 --> 立["立"]
    立 -->|isLeaf| 独立Leaf((台海独立))

    海 --> 总["总"]
    总 --> 统2["统"]
    统2 -->|isLeaf| 总统Leaf((台海总统))

    海 --> 帝["帝"]
    帝 --> 国2["国"]
    国2 -->|isLeaf| 帝国Leaf1((台海帝国))

    %% 台界开头
    台 --> 界["界"]
    界 --> 帝3["帝"]
    帝3 --> 国3["国"]
    国3 -->|isLeaf| 帝国Leaf2((台界帝国))

    %% 洲界开头
    洲 --> 界2["界"]
    界2 --> 帝4["帝"]
    帝4 --> 国4["国"]
    国4 -->|isLeaf| 帝国Leaf3((洲界帝国))

    %% 皇帝国家
    皇 --> 帝5["帝"]
    帝5 --> 国5["国"]
    国5 --> 家["家"]
    家 -->|isLeaf| 皇帝国家Leaf((皇帝国家))

    %% 统战部
    统 --> 战["战"]
    战 --> 部["部"]
    部 -->|isLeaf| 统战部Leaf((统战部))

```


## AC 树示意图

### 简单示意图

```mermaid
graph TD
    Root((root))
    
    %% 根节点分支
    Root --> 台["台"]
    Root --> 洲["洲"]
    Root --> 皇["皇"]
    Root --> 统["统"]

    %% 台开头
    台 --> 海["海"]
    台 --> 界["界"]

    %% 台海开头
    海 --> 国["国"]
    国 --> 国Leaf(("台海国"))

    海 --> 独["独"]
    独 --> 立["立"]
    立 --> 独立Leaf(("台海独立"))

    海 --> 总["总"]
    总 --> 统2["统"]
    统2 --> 总统Leaf(("台海总统"))

    海 --> 帝["帝"]
    帝 --> 国2["国"]
    国2 --> 帝国Leaf1(("台海帝国"))

    %% 台界开头
    界 --> 帝2["帝"]
    帝2 --> 国3["国"]
    国3 --> 帝国Leaf2(("台界帝国"))

    %% 洲界帝国
    洲 --> 界2["界"]
    界2 --> 帝3["帝"]
    帝3 --> 国4["国"]
    国4 --> 帝国Leaf3(("洲界帝国"))

    %% 皇帝国家
    皇 --> 帝4["帝"]
    帝4 --> 国5["国"]
    国5 --> 家["家"]
    家 --> 皇帝国家Leaf(("皇帝国家"))

    %% 统战部
    统 --> 战["战"]
    战 --> 部["部"]
    部 --> 统战部Leaf(("统战部"))

    %% fail 指针虚线示意（复用公共后缀）
    国 -.-> Root
    独 -.-> Root
    立 -.-> Root
    总 -.-> Root
    统2 -.-> Root
    帝 -.-> Root
    国2 -.-> Root
    界 -.-> Root
    帝2 -.-> 帝
    国3 -.-> 国2
    洲 -.-> Root
    界2 -.-> Root
    帝3 -.-> 帝2
    国4 -.-> 国2
    皇 -.-> Root
    帝4 -.-> Root
    国5 -.-> Root
    家 -.-> Root
    统 -.-> Root
    战 -.-> Root
    部 -.-> Root

```

### 复杂完整示意图

```mermaid
graph TD
    %% 根节点
    Root((root))
    
    %% 第一层
    Root --> 台["台\noutput:[]\nfail:root"]
    Root --> 界["界\noutput:[]\nfail:root"]
    Root --> 洲["洲\noutput:[]\nfail:root"]
    Root --> 皇["皇\noutput:[]\nfail:root"]
    Root --> 统["统\noutput:[]\nfail:root"]

    %% 第二层 - 台开头
    台 --> 海["海\noutput:[]\nfail:root"]
    台 --> 界2["界\noutput:[]\nfail:root"]

    %% 第三层 - 台海开头的敏感词
    海 --> 国["国\noutput:['台海国']\nfail:root"]
    海 --> 独["独\noutput:[]\nfail:root"]
    海 --> 总["总\noutput:[]\nfail:root"]
    海 --> 帝["帝\noutput:[]\nfail:root"]

    %% 第四层 - 台海分支
    独 --> 立["立\noutput:['台海独立']\nfail:root"]
    总 --> 统2["统\noutput:['台海总统']\nfail:root"]
    帝 --> 国2["国\noutput:['台海帝国']\nfail:root"]

    %% 第三层 - 台界开头
    界2 --> 帝2["帝\noutput:[]\nfail:帝"]
    帝2 --> 国3["国\noutput:['台界帝国']\nfail:国2"]

    %% 第三层 - 洲界帝国
    洲 --> 界3["界\noutput:[]\nfail:root"]
    界3 --> 帝3["帝\noutput:[]\nfail:帝2"]
    帝3 --> 国4["国\noutput:['洲界帝国']\nfail:国2"]

    %% 第三层 - 皇帝国家
    皇 --> 帝4["帝\noutput:[]\nfail:root"]
    帝4 --> 国5["国\noutput:[]\nfail:root"]
    国5 --> 家["家\noutput:['皇帝国家']\nfail:root"]

    %% 第三层 - 统战部
    统 --> 战["战\noutput:[]\nfail:root"]
    战 --> 部["部\noutput:['统战部']\nfail:root"]

    %% fail 指针虚线表示（复用公共后缀）
    国 -.-> Root
    独 -.-> Root
    立 -.-> Root
    总 -.-> Root
    统2 -.-> Root
    帝 -.-> Root
    国2 -.-> Root
    界2 -.-> Root
    帝2 -.-> 帝
    国3 -.-> 国2
    洲 -.-> Root
    界3 -.-> Root
    帝3 -.-> 帝2
    国4 -.-> 国2
    皇 -.-> Root
    帝4 -.-> Root
    国5 -.-> Root
    家 -.-> Root
    统 -.-> Root
    战 -.-> Root
    部 -.-> Root

```

## AC（Aho-Corasick）算法的敏感词匹配流程

示例 AC 树简化结构如下：

```
root
├─台
│  ├─海
│  │  ├─国       (output: 台海国)
│  │  ├─独
│  │  │  └─立   (output: 台海独立)
│  │  ├─总
│  │  │  └─统   (output: 台海总统)
│  │  └─帝
│  │     └─国   (output: 台海帝国)
│  └─界
│     └─帝
│        └─国   (output: 台界帝国)
├─洲
│  └─界
│     └─帝
│        └─国   (output: 洲界帝国)
├─皇
│  └─帝
│     └─国
│        └─家   (output: 皇帝国家)
└─统
   └─战
      └─部       (output: 统战部)
```

### AC 匹配流程动画版

```mermaid
flowchart TD
    %% 文本扫描流程
    subgraph 文本扫描["文本: 台海总统是国家领导人"]
        direction LR
        T0["台"] --> T1["海"] --> T2["总"] --> T3["统"] --> T4["是"] --> T5["国"] --> T6["家"] --> T7["领"] --> T8["导"] --> T9["人"]
    end

    %% AC 树节点状态
    subgraph AC树["AC 树节点移动及fail回溯"]
        direction TB
        Root((root))
        台["台"] 
        海["海"]
        总["总"] 
        统["统\noutput:['台海总统']"]
        国["国\noutput:['台海国']"]
        独["独"]
        立["立\noutput:['台海独立']"]
        帝["帝"]
        国2["国\noutput:['台海帝国']"]
        界["界"]
        帝2["帝"]
        国3["国\noutput:['台界帝国']"]
        洲["洲"]
        界2["界"]
        帝3["帝"]
        国4["国\noutput:['洲界帝国']"]
        皇["皇"]
        帝4["帝"]
        国5["国"]
        家["家\noutput:['皇帝国家']"]
        统2["统"]
        战["战"]
        部["部\noutput:['统战部']"]

        %% 树结构
        Root --> 台
        台 --> 海
        海 --> 国
        海 --> 独
        独 --> 立
        海 --> 总
        总 --> 统
        海 --> 帝
        帝 --> 国2
        台 --> 界
        界 --> 帝2
        帝2 --> 国3
        Root --> 洲
        洲 --> 界2
        界2 --> 帝3
        帝3 --> 国4
        Root --> 皇
        皇 --> 帝4
        帝4 --> 国5
        国5 --> 家
        Root --> 统2
        统2 --> 战
        战 --> 部

        %% fail 指针示意
        国 -.-> Root
        独 -.-> Root
        立 -.-> Root
        总 -.-> Root
        统 -.-> Root
        帝 -.-> Root
        国2 -.-> Root
        界 -.-> Root
        帝2 -.-> 帝
        国3 -.-> 国2
        洲 -.-> Root
        界2 -.-> Root
        帝3 -.-> 帝2
        国4 -.-> 国3
        皇 -.-> Root
        帝4 -.-> Root
        国5 -.-> Root
        家 -.-> 国5
        统2 -.-> Root
        战 -.-> Root
        部 -.-> 战
    end

    %% 匹配流程箭头（示例文本: "台海总统是国家领导人"）
    T0 -->|匹配 '台'| 台
    T1 -->|匹配 '海'| 海
    T2 -->|匹配失败 '总', fail 回溯 root| fail1[fail]
    fail1 -->|从 root 尝试 '总'| 总
    T3 -->|匹配 '统', output| 统
    统 -->|记录匹配: '台海总统'| 统
    T4 -->|匹配失败 '是', fail 回溯 root| fail2[fail]

```

## DFA 与 AC 树对比图

```mermaid
%% DFA 与优化 AC 树对比
graph TD
    subgraph DFA
        DRoot((root))
        DRoot --> D台["台"]
        D台 --> D海["海"]
        D海 --> D国["国"]
        D国 --> D国Leaf(("叶子: 台海国"))
        D海 --> D独["独"]
        D独 --> D立["立"]
        D立 --> D独立Leaf(("叶子: 台海独立"))
        D海 --> D总["总"]
        D总 --> D统["统"]
        D统 --> D总统Leaf(("叶子: 台海总统"))
        D海 --> D帝["帝"]
        D帝 --> D国2["国"]
        D国2 --> D帝国Leaf1(("叶子: 台海帝国"))
        D台 --> D界["界"]
        D界 --> D帝2["帝"]
        D帝2 --> D国3["国"]
        D国3 --> D帝国Leaf2(("叶子: 台界帝国"))
        DRoot --> D洲["洲"]
        D洲 --> D界2["界"]
        D界2 --> D帝3["帝"]
        D帝3 --> D国4["国"]
        D国4 --> D帝国Leaf3(("叶子: 洲界帝国"))
        DRoot --> D皇["皇"]
        D皇 --> D帝4["帝"]
        D帝4 --> D国5["国"]
        D国5 --> D家["家"]
        D家 --> D皇家Leaf(("叶子: 皇帝国家"))
        DRoot --> D统2["统"]
        D统2 --> D战["战"]
        D战 --> D部["部"]
        D部 --> D统战Leaf(("叶子: 统战部"))
    end

    subgraph AC
        Root((root))
        Root --> 台["台"]
        Root --> 界["界"]
        Root --> 洲["洲"]
        Root --> 皇["皇"]
        Root --> 统2["统"]

        台 --> 海["海"]
        海 --> 国["国"]
        国 --> 国Leaf(("台海国"))
        海 --> 独["独"]
        独 --> 立["立"]
        立 --> 独立Leaf(("台海独立"))
        海 --> 总["总"]
        总 --> 统["统"]
        统 --> 总统Leaf(("台海总统"))
        海 --> 帝["帝"]
        帝 --> 国2["国"]
        国2 --> 帝国Leaf1(("台海帝国"))

        界 --> 帝2["帝"]
        帝2 --> 国3["国"]
        国3 --> 帝国Leaf2(("台界帝国"))

        洲 --> 界2["界"]
        界2 --> 帝3["帝"]
        帝3 --> 国4["国"]
        国4 --> 帝国Leaf3(("洲界帝国"))

        皇 --> 帝4["帝"]
        帝4 --> 国5["国"]
        国5 --> 家["家"]
        家 --> 皇家Leaf(("皇帝国家"))

        统2 --> 战["战"]
        战 --> 部["部"]
        部 --> 统战Leaf(("统战部"))

        %% fail 指针虚线
        国 -.-> Root
        独 -.-> Root
        立 -.-> Root
        总 -.-> Root
        统 -.-> Root
        帝 -.-> Root
        国2 -.-> Root
        界 -.-> Root
        帝2 -.-> Root
        国3 -.-> Root
        洲 -.-> Root
        界2 -.-> Root
        帝3 -.-> Root
        国4 -.-> Root
        皇 -.-> Root
        帝4 -.-> Root
        国5 -.-> Root
        家 -.-> Root
        统2 -.-> Root
        战 -.-> Root
        部 -.-> Root
    end

```

## AC vs DFA 匹配动画对比图

```mermaid
flowchart TB
    %% 文本扫描
    subgraph 文本["文本: 台海总统是国家领导人"]
        direction LR
        T0["台"] --> T1["海"] --> T2["总"] --> T3["统"] --> T4["是"] --> T5["国"] --> T6["家"] --> T7["领"] --> T8["导"] --> T9["人"]
    end

    %% DFA 匹配流程
    subgraph DFA["DFA 匹配流程"]
        direction TB
        DRoot((root))
        D台["台"] 
        D海["海"]
        D国["国\noutput:['台海国']"]
        D独["独"]
        D立["立\noutput:['台海独立']"]
        D总["总"]
        D统["统\noutput:['台海总统']"]
        D帝["帝"]
        D国2["国\noutput:['台海帝国']"]
        D界["界"]
        D帝2["帝"]
        D国3["国\noutput:['台界帝国']"]
        D洲["洲"]
        D界2["界"]
        D帝3["帝"]
        D国4["国\noutput:['洲界帝国']"]
        D皇["皇"]
        D帝4["帝"]
        D国5["国"]
        D家["家\noutput:['皇帝国家']"]
        D统2["统"]
        D战["战"]
        D部["部\noutput:['统战部']"]

        %% 树结构
        DRoot --> D台
        DRoot --> D界
        DRoot --> D洲
        DRoot --> D皇
        DRoot --> D统2

        D台 --> D海
        D海 --> D国
        D海 --> D独
        D独 --> D立
        D海 --> D总
        D总 --> D统
        D海 --> D帝
        D帝 --> D国2

        D界 --> D帝2
        D帝2 --> D国3

        D洲 --> D界2
        D界2 --> D帝3
        D帝3 --> D国4

        D皇 --> D帝4
        D帝4 --> D国5
        D国5 --> D家

        D统2 --> D战
        D战 --> D部
    end

    %% AC 匹配流程
    subgraph AC["AC 匹配流程"]
        direction TB
        ARoot((root))
        A台["台"] 
        A海["海"]
        A国["国\noutput:['台海国']"]
        A独["独"] 
        A立["立\noutput:['台海独立']"]
        A总["总"]
        A统["统\noutput:['台海总统']"]
        A帝["帝"] 
        A国2["国\noutput:['台海帝国']"]
        A界["界"] 
        A帝2["帝"] 
        A国3["国\noutput:['台界帝国']"]
        A洲["洲"]
        A界2["界"]
        A帝3["帝"]
        A国4["国\noutput:['洲界帝国']"]
        A皇["皇"]
        A帝4["帝"]
        A国5["国"]
        A家["家\noutput:['皇帝国家']"]
        A统2["统"]
        A战["战"]
        A部["部\noutput:['统战部']"]

        %% 树结构
        ARoot --> A台
        ARoot --> A界
        ARoot --> A洲
        ARoot --> A皇
        ARoot --> A统2

        A台 --> A海
        A海 --> A国
        A海 --> A独
        A独 --> A立
        A海 --> A总
        A总 --> A统
        A海 --> A帝
        A帝 --> A国2

        A界 --> A帝2
        A帝2 --> A国3

        A洲 --> A界2
        A界2 --> A帝3
        A帝3 --> A国4

        A皇 --> A帝4
        A帝4 --> A国5
        A国5 --> A家

        A统2 --> A战
        A战 --> A部

        %% fail 指针虚线
        A国 -.-> ARoot
        A独 -.-> ARoot
        A立 -.-> ARoot
        A总 -.-> ARoot
        A统 -.-> ARoot
        A帝 -.-> ARoot
        A国2 -.-> ARoot
        A界 -.-> ARoot
        A帝2 -.-> ARoot
        A国3 -.-> ARoot
        A洲 -.-> ARoot
        A界2 -.-> ARoot
        A帝3 -.-> ARoot
        A国4 -.-> ARoot
        A皇 -.-> ARoot
        A帝4 -.-> ARoot
        A国5 -.-> ARoot
        A家 -.-> ARoot
        A统2 -.-> ARoot
        A战 -.-> ARoot
        A部 -.-> ARoot
    end

    %% DFA 动画匹配箭头
    T0 -->|匹配 '台'| D台
    T1 -->|匹配 '海'| D海
    T2 -->|匹配 '总'| D总
    T3 -->|匹配 '统', output| D统
    D统 -->|记录匹配: '台海总统'| D统
    T4 -->|匹配失败 '是', 回到 root| DRoot

    %% AC 动画匹配箭头
    T0 -->|匹配 '台'| A台
    T1 -->|匹配 '海'| A海
    T2 -->|匹配 '总', fail 回溯 root| ARoot
    ARoot -->|尝试 '总', 成功| A总
    T3 -->|匹配 '统', output| A统
    A统 -->|记录匹配: '台海总统'| A统
    T4 -->|匹配失败 '是', fail 回溯 root| ARoot

```